<!DOCTYPE html>
<html>
<head>
    <title>Debug Cache</title>
</head>
<body>
    <h1>Cache Debug Page</h1>
    <button onclick="clearCacheAndReload()">Clear Cache & Reload</button>
    <div id="debug-info"></div>
    
    <script>
    async function clearCacheAndReload() {
        try {
            // Unregister service worker
            if ('serviceWorker' in navigator) {
                const registrations = await navigator.serviceWorker.getRegistrations();
                for (let registration of registrations) {
                    await registration.unregister();
                    console.log('Unregistered service worker');
                }
            }
            
            // Clear all caches
            if ('caches' in window) {
                const cacheNames = await caches.keys();
                console.log('Found caches:', cacheNames);
                for (const cacheName of cacheNames) {
                    await caches.delete(cacheName);
                    console.log('Deleted cache:', cacheName);
                }
            }
            
            // Clear localStorage
            localStorage.clear();
            console.log('Cleared localStorage');
            
            // Force reload
            window.location.href = '/index.html?t=' + Date.now();
            
        } catch (error) {
            console.error('Error clearing cache:', error);
            document.getElementById('debug-info').innerHTML = 'Error: ' + error.message;
        }
    }
    
    // Show cache info
    navigator.serviceWorker.ready.then(function() {
        document.getElementById('debug-info').innerHTML = 'Service Worker is active';
    });
    </script>
</body>
</html>